-- MAIN SCRIPT COMPAT√çVEL COM MOBILE + PC + EXECUTOR
local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local player = Players.LocalPlayer

local function WaitForTycoon()
    local maps = workspace:WaitForChild("Maps")

    for _, model in ipairs(maps:GetChildren()) do
        if model:IsA("Model") then
            local owner = model:FindFirstChild("TycoonOwner")
            if owner and owner:IsA("StringValue") then
                if owner.Value == player.Name then
                    return model
                end
            end
        end
    end

    return nil
end

-- üîç encontra o Tycoon
local tycoon = WaitForTycoon()
if not tycoon then
    warn("Nenhum tycoon encontrado para:", player.Name)
    return
end

-- üóÇ pega PlacedBox ou PlacedBoxes automaticamente
local PlacedBox = tycoon:FindFirstChild("PlacedBox") or tycoon:FindFirstChild("PlacedBoxes")

if not PlacedBox then
    warn("O Tycoon do jogador n√£o possui PlacedBox ou PlacedBoxes!")
    return
end

----------------------------------------------------------
-- GUI MOBILE / PC
----------------------------------------------------------

local playerGui = player:WaitForChild("PlayerGui")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "TeleportUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 220, 0, 80)
button.Position = UDim2.new(0.5, -110, 0.8, 0)
button.Text = "Teleportar Caixas"
button.BackgroundColor3 = Color3.fromRGB(30, 150, 255)
button.TextColor3 = Color3.new(1, 1, 1)
button.TextScaled = true
button.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = button

----------------------------------------------------------
-- TELEPORTE
----------------------------------------------------------

local function Teleportar()
    local char = player.Character or player.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")

    for _, obj in ipairs(PlacedBox:GetChildren()) do
        if obj:IsA("Model") then
            if not obj.PrimaryPart then
                local p = obj:FindFirstChildWhichIsA("BasePart")
                if p then obj.PrimaryPart = p end
            end

            if obj.PrimaryPart then
                obj:SetPrimaryPartCFrame(hrp.CFrame * CFrame.new(0, 3, -4))
            end
        end
    end
end

-- PC ‚Üí tecla E
UIS.InputBegan:Connect(function(input, gp)
    if gp then return end
    if input.KeyCode == Enum.KeyCode.E then
        Teleportar()
    end
end)

-- MOBILE / PC ‚Üí bot√£o
button.MouseButton1Click:Connect(function()
    Teleportar()
end)
