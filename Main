local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local player = Players.LocalPlayer

local function WaitForTycoon()
    local maps = workspace:WaitForChild("Maps")
    for _, model in ipairs(maps:GetChildren()) do
        if model:IsA("Model") then
            local owner = model:FindFirstChild("TycoonOwner")
            if owner and owner:IsA("StringValue") and owner.Value == player.Name then
                return model
            end
        end
    end
    return nil
end

local tycoon = WaitForTycoon()
if not tycoon then return end

local PlacedBoxes = tycoon:FindFirstChild("PlacedBoxes") or tycoon:FindFirstChild("PlacedBox")
if not PlacedBoxes then return end

local playerGui = player:WaitForChild("PlayerGui")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "TeleportUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 220, 0, 80)
button.Position = UDim2.new(0.5, -110, 0.8, 0)
button.Text = "Teleportar Caixas"
button.BackgroundColor3 = Color3.fromRGB(30, 150, 255)
button.TextColor3 = Color3.new(1, 1, 1)
button.TextScaled = true
button.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = button

local function Teleportar()
    local char = player.Character or player.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")
    for _, obj in ipairs(PlacedBoxes:GetChildren()) do
        if obj:IsA("Model") then
            if not obj.PrimaryPart then
                local p = obj:FindFirstChildWhichIsA("BasePart")
                if p then obj.PrimaryPart = p end
            end
            if obj.PrimaryPart then
                obj:SetPrimaryPartCFrame(hrp.CFrame * CFrame.new(0, 3, -4))
            end
        end
    end
end

UIS.InputBegan:Connect(function(input, gp)
    if gp then return end
    if input.KeyCode == Enum.KeyCode.E then
        Teleportar()
    end
end)

button.MouseButton1Click:Connect(function()
    Teleportar()
end)
